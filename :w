return {
  keymap = { preset = "enter" },
  completion = {
    accept = { auto_brackets = { enabled = true } },
    documentation = {
      auto_show = true,
      auto_show_delay_ms = 500,
    },
  list = { 
    selection = function(ctx)
      return ctx.mode == 'cmdline' and 'auto_insert' or 'preselect'
    end
  }
  },
  appearance = {
    use_nvim_cmp_as_default = false,
    nerd_font_variant = "mono",
  },
  sources = {
    default = function()
      local success, node = pcall(vim.treesitter.get_node)
      if vim.bo.filetype == "lua" then
        return { "lsp", "path" }
      elseif success and node and vim.tbl_contains({ "comment", "line_comment", "block_comment" }, node:type()) then
        return { "buffer" }
      else
        return { "lsp", "path", "snippets", "buffer" }
      end
    end,
  },
  signature = { enabled = true },
}
